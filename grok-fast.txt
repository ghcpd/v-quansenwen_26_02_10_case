Session: Max table width issue in headers
User: Headers don't appear to handle max_table_width properly. I set max_table_width but header still exceed the limit.Do not modify or add new test cases, and make sure all tests pass.
GitHub Copilot: Perfect! I have successfully fixed the issue with headers not respecting
. Here's a summary of what I did:

## Problem Analysis
The issue was in the
method, which is responsible for aligning text within columns. When
is set, the library scales down column widths proportionally, but if headers are longer than the scaled width, they weren't being truncated. This caused the table to exceed the specified maximum width.

## Solution
I modified the
method to check if the text width exceeds the column width, and if so, truncate the text to fit. I also added a helper method
that truncates text from the end until it fits within the width.

## Changes Made
1. **Modified
method**: Added logic to truncate text if it exceeds the width before applying alignment.
2. **Added
method**: A simple truncation function that removes characters from the end until the text fits.

## Verification
- The existing test
now passes.
- All 126 tests in the test suite pass, ensuring no regressions.
- The fix ensures headers are properly truncated when
constrains the table size.

The headers now correctly respect the
setting by being truncated to fit within the scaled column widths.

---
